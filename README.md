# Проект Трекер привычек

В 2018 году Джеймс Клир написал книгу «Атомные привычки», которая посвящена приобретению новых полезных привычек и
искоренению старых плохих привычек.
В рамках данного проекта реализована бэкенд-часть SPA веб-приложения для Трекера привычек.

## Описание:

В данном проекте добавлены необходимые модели привычек.
Реализованы эндпоинты для работы с фронтендом.
Создано приложение для работы с Telegram и рассылками напоминаний.

## Требования:

Для работы с проектом необходимо установить следующие инструменты:

- Docker
- Docker Compose
- Python 3.12+

## Запуск проекта локально:

Чтобы запустить проект локально, выполните следующие шаги:

1. Клонируйте репозиторий:
   ```
   git clone https://github.com/KseniyaPestrakova/course_work_5.git
   cd course_work_5
   ```

2. Создайте файл .env в корне проекта на основе .env.example, указав необходимые переменные для подключения к базе
   данных и другим сервисам.

3. Постройте и запустите контейнеры:
   ```docker-compose up --build -d'```

4. Перейдите по адресу http://localhost:8000 в вашем браузере, чтобы проверить работу приложения.

5. Для работы с Celery используйте команду:
   ```docker-compose run celery```

   Для запуска Celery beat (для периодических задач):
   ```docker-compose run celery_beat```

6. Для остановки контейнеров:
   ```docker-compose down```

### Запуск проекта на удаленном сервере

Для запуска проекта на удаленном сервере выполните следующие шаги:

Подготовьте сервер:

- Установите Docker и Docker Compose на сервер, если они еще не установлены.
    - Скопируйте репозиторий на сервер.
      ```git clone https://github.com/KseniyaPestrakova/course_work_5.git```
      ```cd course_work_5```

Создайте файл .env с правильными значениями переменных окружения на сервере.

Разверните проект с помощью Docker Compose:
```docker-compose up --build -d```

После успешного запуска, приложение будет доступно по следующему адресу: http://<IP-сервера>:80.

Чтобы проверить логи контейнеров, используйте команду:
```docker-compose logs```

Для остановки контейнеров на сервере:
```docker-compose down```

### Настройка CI/CD

#### GitHub Actions

Для автоматизации тестирования и деплоя используется GitHub Actions. В репозитории настроен workflow, который выполняет
следующие шаги:

1. Линтинг кода с помощью flake8.
2. Запуск тестов на Django.
3. Сборка и пуш Docker-образа на Docker Hub.
4. Деплой на удаленный сервер через SSH.

#### Шаги для настройки CI/CD:

1. Убедитесь, что у вас есть следующие секреты в репозитории GitHub:

DOCKER_HUB_USERNAME — ваш Docker Hub логин.
DOCKER_ACCESS_TOKEN — ваш токен для доступа к Docker Hub.
SSH_KEY — приватный ключ для подключения к серверу.
SSH_USER — пользователь SSH на сервере.
SERVER_IP — IP-адрес вашего удаленного сервера.
DOTENV — содержимое файла .env.

2. Все шаги будут автоматически выполнены при каждом push или pull request в ветку main.

3. После успешного выполнения workflow, образ будет задеплоен на сервер и доступен по указанному IP-адресу.

### Адрес развернутого приложения
Приложение доступно по следующему адресу: http://<IP-сервера>:80.
Замените <IP-сервера> на фактический IP-адрес вашего удаленного сервера, чтобы получить доступ к приложению.

## Использование:

## Тестирование:

## Документация:

## Лицензия: 